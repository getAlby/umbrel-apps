version: "3.7"

services:
   app_proxy:
      environment:
         APP_HOST: minio_web_1
         APP_PORT: 9011
         PROXY_AUTH_ADD: "false"

   web:
      image: quay.io/minio/minio:RELEASE.2024-08-17T01-24-54Z@sha256:6f23072e3e222e64fe6f86b31a7f7aca971e5129e55cbccef649b109b8e651a1
      restart: on-failure
      user: "1000:1000"
      stop_grace_period: 1m
      ports:
         # MinIO Api Server Port
         - "9010:9000"
      command: ["server", "/data"]
      volumes:
         - ${APP_DATA_DIR}/data/minio:/data
      environment:
         MINIO_ROOT_USER: "umbrel"
         MINIO_ROOT_PASSWORD: "$APP_PASSWORD"
         MINIO_CONSOLE_ADDRESS: ":9011"